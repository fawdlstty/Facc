# 第三章：Facc语法规范

## 基本语法

Facc 语法描述格式为：非终结符名称、`::=`、表达式。

```ebnf
non_terminal ::= expr
```

非终结符名称可以取数字、大小写字母、下划线_，但不能以数字开头。然后是`::=`，由于语言文法的有个老大哥级别的规范，叫EBNF表达式，能做的事情和Facc完全一致，此处沿用EBNF规范。当然，其他很多地方没有沿用规范的原因是，个人觉得这样写更简单，没必要沿用，于是顺手改了。

## 表达式“与”模式、“或”模式

接下来就是表达式了。表达式允许两种类型，“与”，以及“或”。“与”模式下要求表达式项同时存在。比如我们想定义一个取数组元素的表达式（比如：`arr[10]`），需要变量名、方括号、索引同时存在。我们假设定义了id规范及num规范，那么表达式可以定义为：

```ebnf
array_access_expr ::= id '[' num ']'
```

“或”模式要求表达式中的项只允许存在一个。比如数字间的运算符允许是加减乘除等。表达式可以定义为：

```ebnf
op ::= '+' | '-' | '*' | '/'
```

## 终结符

终结符有两种定义方式，字符终结符或字符串终结符。

字符终结符允许匹配代码中的一个字符。比如需要匹配一个标识符：

```ebnf
id ::= [a-zA-Z_] [0-9a-zA-Z_]*
```

方括号内允许使用单个字符或者字符范围，比如匹配一个标识符的第一个字符，允许使用小写字母（a-z）、大写字母（A-Z）、下划线（_）。需注意，如果需匹配单个字符‘-’，为避免被当做字符范围解析，需放置方括号内的第一个位置。

## 重复次数

默认只允许重复1次，通过在末尾加入不同符号代表标识取值范围

- `?` 0次~1次
- `*` 0次~无数次
- `+` 1次~无数次

## 组

通过在表达式中加入括号，组成一个组，可以通过这种方式，控制重复次数。比如要求两种类型符号交替出现可以写为：

```ebnf
expr ::= num (op num)+
```

## 注释

注释为对代码描述语句的备注，注释内容将被忽略，不参与解析。

两种注释方式。  
“//”为行注释，注释此标识到行结束，不过与C++不同的地方在于不允许续行（C++通过行末“\”续行，能让下一行也变成注释）  
“/**/”为块注释，能跨行使用。
